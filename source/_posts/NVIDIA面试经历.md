title: "【转】NVIDIA面试记录"
date: 2016-03-14 12:30:40
tags: [面试]
---
作者：胡阳阳

我面的是GPGPU CUDA的开发。
这次是第一次onsite面，之前已经过了两次电话面和一次程序笔试。每次电面都是45分钟。

背景：因为个人原因，没有特地准备面试题只是偶尔看过一两道，也没赶上校招。CS专业，研三，科学计算方向，主要CUDA。操作系统基础薄弱。面试前恶补了一下。
<!-- more --> 
投了简历以后，HR联系了一次我问了下意向，然后就是电话面试前一天会通知，如果没有时间第二天也可以商量推后，不过要确定时间，之后HR会邮件确认。先说说前三次的情况吧。

第一次面，问了五道题。
1)介绍自己的项目
我就说了CUDA的研发经历是偏研究性质的。
2)不用中间变量，交换a,b,c三个数。后来看了一下网上的说法，算是有准备。这就相当于两次两个数的交换，我先说了有加减的方法，但是说这有缺点会越界。然后就提到用异或操作，并描述了具体过程。
3)2n个数，有n个处理器，如何求和。
基础题。归约就可以。
然后就是10n的情况，我说的是先收到2n再做归约。
进一步问了2n个数的时候归约求和的话，走多少步。1+logn。
多少个加操作。其实永远都是2n-1当时傻了一下还按归约的树状结构推了一下。
4)反正也是基础题：描述线程和进程。
5)说说拿到串行以后的优化思路。

这一面比较简单，都答上来了。

第二面
直接就是三个大题。有小问，一问一问递进的。应该说不算太难，有些点之前不知道就没想出来。不过就是最难的一个小问没答上来。
主要是多处理器，带宽，延时和复杂度的问题，都是计算。还有计算密集，数据密集的判断。

第三面
是直接给了一道.cu的 CUDA程序，要求优化并写一份小结。限时是48小时。大体上就是，有个矩阵奇数列做一种操作，偶数列做另一种操作。各种书上的策略我都试了，性能是原有CUDA的5倍。然后小结写的很详细，成功和不成功的尝试都写了，包括测试程序。
要是可以的话，我把这个PO到GitHub上。

我周六交的代码。周一上班通知了HR，周四HR就说我过了，让我下周一(2016.1.26) 来面试。于是我就来了。

onsite。一共面四个人，每人45分钟，下午一点半开始。
第一个好像是team的老大，他看了我的三个研究经历，让我介绍两个。问的挺深入的。包括目的应用，物理意义和原理。有的地方我说得也不是太清楚，因为是FFT，optics这样偏研究的算法经历，点挺多的。不知道评价怎样。45分钟挺快的。

第二位
第一次电面的考官。先深就了一下他上次问我的经历，我感觉是他自己感兴趣才问的。anyway。其他就是问题了
1)向量点乘，坐标表示。这个好写
2)向量叉乘，坐标表示。忘了，只记得用sin的表示了。考官表示理解，问我是向量还是标量，我说是向量。就继续了。
3)向量旋转¢角度。记得三角函数展开，就现推了，他提示我用极坐标带换一下，顺利推出来了。
4)计算一个非负整形二进制表示中一的个数。写代码。
我用位操作写的。也算是基础题吧
5)用一行代码判断，一个非负整形是否是二的指数次方。
有点难。我只好说就是2 4 8....按位与再或一下。
他提示了我很多，最后不算是我自己想出来的了吧。就是减一的结果和原先的做按位与，判断是否为零。

还有一题记不得是不是他出的了，就是问我float型是怎么构成的。我有点印象：科学计数法表示。符号位e的指数位和数值位。如果再分指数位还有符号位。好像就是这样。

前两位的问题和草稿说明都是在玻璃白板上即时演算的。

第三位
1)面试题 有个单链表，只知道跑指针p，需要删除该节点，怎么办？写代码的。
判断是否是尾以后，复制后面的节点，然后删除后面的。没什么难的
2)一个任务可分成n个不可再分的子任务[1~n]，第i个任务执行i秒。
顺序要多少秒？ n(n+1)/2
无限个处理器要多少秒？n
希望处理器空闲时间最少，如何分配任务，空闲多少时间？
就是对折，分奇偶讨论。
奇数，1～(n-1)对折，用n 秒，空闲0秒，
偶数，1～n对折，用n+1秒，空闲0秒，
1～n-1对折，用n秒，空闲(n-1)/2秒。
我考虑的是用时不变，所以说的是1、3情况。二是补充的。
3)CUDA同步函数，__sycnthread(好像没拼错)的作用。如何实现块间同步。因为之前有试过，我就说用global 里面建锁就可以，加上原子操作。还把以前遇到的问题也和他讨论了。
第四位
1)C的链表为什么在GPU里不合适
2)local memory，他先介绍了一下概念。然后说题目：每个线程搜索一个节点数不超过32的树，并开localmemory作标记，有孩子结点的就记1，没有就记0。发现瓶颈在记录local memory上，带宽上限了。怎么优化？
3)非负整型排序好的数组A，B来记录每个不同的数第一次在A中出现的位置。写代码CUDA实现。
4)一个非负整型数组。一个数出现奇数次，其它出现偶数次。比如11232。
如何找出出现奇数次的数。分析复杂度。
我给的是用桶计数，建桶的方法就是哈希。时间复杂度n，空间有点大看哈希的策略。
他提示的方法是异或。a^a=0; 0^a=a; a^b=b^a。全部遍历一遍就好。然后是GPU对应优化和分析。纠正了我一些理解错误。